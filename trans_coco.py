import json
import copy
import os

select = [322, 474, 510, 692, 731, 962, 1706, 1948, 2400, 2477, 2575, 2583, 2602, 2703, 3118, 3432, 4275, 4386, 4498, 5032, 5219, 5701, 5823, 6041, 6379, 6409, 6590, 6675, 6692, 6973, 7615, 8238, 8383, 9801, 10012, 10313, 10319, 11129, 11754, 12096, 12795, 13175, 13717, 13867, 13921, 13985, 14090, 14252, 14428, 14537, 14549, 14874, 15002, 15017, 15354, 15546, 15559, 15818, 15885, 15968, 16080, 16099, 16497, 17003, 17068, 17137, 17181, 17273, 17308, 17484, 17559, 18250, 18367, 18396, 18809, 19642, 20389, 20410, 20698, 20742, 20962, 20965, 22116, 22367, 22658, 23050, 23392, 23420, 23447, 23927, 23967, 24038, 24040, 24103, 25005, 25162, 25237, 25244, 25576, 25755, 25855, 26031, 26132, 26133, 26302, 26374, 26405, 26427, 26507, 26537, 26699, 26817, 27207, 27364, 27482, 27920, 28231, 28257, 28327, 28518, 28650, 29136, 29431, 29472, 29719, 29727, 29730, 29752, 30067, 30334, 30712, 30852, 31373, 31462, 31504, 31738, 32134, 32413, 32513, 32607, 32778, 32812, 32957, 33158, 33315, 33441, 33555, 33840, 34056, 34234, 34412, 35037, 35313, 35670, 35795, 35948, 36151, 36373, 36473, 36482, 36498, 36653, 36827, 36881, 37102, 37124, 37519, 37846, 38049, 38532, 39082, 39138, 39495, 39570, 39629, 39764, 39888, 40111, 40334, 40361, 40954, 41011, 41014, 41331, 41413, 41899, 42169, 42418, 42667, 42756, 42820, 44360, 44474, 44612, 45086, 45627, 45672, 45922, 46038, 46195, 46258, 46306, 46460, 46990, 47498, 47774, 48169, 48365, 48636, 49065, 49068, 49429, 49478, 49648, 50028, 50407, 50553, 50740, 50817, 50863, 51067, 51270, 52161, 52209, 52281, 52308, 52324, 52348, 52582, 52650, 53177, 53344, 53431, 54277, 54427, 54516, 54743, 55155, 55363, 55618, 55723, 55981, 56283, 56509, 56592, 57256, 57895, 58070, 58355, 58464, 58630, 58690, 58738, 58836, 59012, 60077, 60496, 60519, 60547, 60979, 61046, 61809, 61865, 62295, 62297, 62397, 62480, 62759, 62761, 62878, 63114, 63247, 63347, 63365, 63549, 63890, 63918, 64314, 64470, 64534, 64827, 65057, 65182, 65209, 65220, 65404, 65456, 65965, 66003, 66241, 66676, 66755, 66909, 67241, 67269, 67548, 68211, 68525, 68532, 69029, 69169, 69320, 69646, 69866, 70240, 70296, 70528, 70913, 70935, 71024, 71735, 72098, 72210, 72255, 72525, 72797, 73584, 73588, 73647, 73832, 73941, 73999, 75032, 75595, 75841, 76034, 77473, 77814, 78061, 78288, 78803, 79503, 79619, 79873, 80145, 80430, 80434, 80619, 80747, 81303, 81434, 81704, 82513, 83110, 83519, 83580, 83635, 83654, 83741, 84097, 84460, 84498, 84867, 84896, 84959, 85213, 85247, 85852, 85876, 85881, 86086, 86189, 86526, 86569, 86777, 86988, 87029, 87328, 87501, 87509, 87850, 88576, 88815, 88825, 88999, 89293, 89598, 89616, 89931, 90061, 90201, 90251, 90374, 91154, 91171, 91379, 91996, 92366, 93090, 93287, 93451, 93579, 93586, 93725, 93851, 93853, 94012, 94046, 94593, 95051, 95211, 95273, 95711, 95793, 97040, 97130, 97376, 97530, 97662, 97748, 97822, 97864, 98031, 98503, 98596, 98924, 99218, 99363, 99422, 99607, 99615, 99619, 99755, 99798, 99981, 100142, 100277, 100912, 100930, 101065, 101172, 101218, 101243, 101354, 101794, 102116, 102220, 102329, 102706, 102908, 103252, 103366, 103873, 103935, 104006, 104075, 104400, 104444, 104585, 104588, 104638, 105055, 105386, 105448, 105518, 105714, 106001, 106047, 106484, 106615, 106810, 106874, 106963, 107205, 107360, 107900, 108056, 108313, 108651, 108879, 109119, 109141, 109218, 109232, 109608, 110156, 110357, 110488, 110617, 111109, 111241, 111543, 111756, 111845, 113493, 114045, 114079, 114158, 114353, 114403, 114937, 115518, 115579, 115590, 115616, 115626, 115719, 116334, 116574, 116803, 116832, 117040, 117112, 117508, 117849, 118167, 118542, 118612, 118642, 118745, 119057, 119166, 119441, 119502, 119766, 120120, 120159, 120178, 120416, 120428, 121891, 122182, 123166, 123333, 123545, 124786, 125015, 125036, 125077, 125656, 126027, 126097, 126437, 126628, 126950, 127073, 127267, 127330, 127830, 127863, 127990, 128008, 128117, 128135, 128140, 128181, 128515, 128570, 129041, 129247, 129272, 129379, 129738, 130000, 130240, 130513, 130865, 130869, 130886, 130992, 131277, 131486, 131511, 131580, 131735, 132217, 132307, 132527, 132617, 132719, 133615, 133727, 134079, 134479, 134551, 134552, 134705, 135229, 135754, 135996, 136701, 136849, 137221, 137304, 137884, 138078, 138179, 138200, 138368, 138861, 139068, 139109, 139163, 139261, 139429, 139595, 139878, 139897, 139945, 140007, 140416, 140724, 140860, 140992, 141197, 141200, 141509, 141723, 141759, 142208, 142599, 142711, 142726, 142859, 142924, 142981, 143781, 143904, 143944, 144272, 144983, 145360, 145378, 146076, 146190, 146348, 146654, 146676, 146837, 147054, 147331, 147393, 147429, 147444, 147623, 147913, 148570, 148781, 148931, 149095, 149356, 149500, 149812, 149916, 150331, 150358, 150410, 150462, 151084, 151273, 151564, 151756, 152060, 152650, 152702, 153205, 153394, 153609, 153880, 153896, 154073, 154083, 154096, 154337, 154379, 154835, 154847, 155194, 155417, 155705, 155908, 155930, 156069, 156192, 156375, 157016, 157271, 157356, 157370, 157948, 158420, 158818, 158821, 158887, 159372, 159375, 159377, 160229, 160351, 160694, 160735, 160837, 160844, 161328, 161586, 161610, 161843, 161917, 162007, 162475, 162530, 162930, 163127, 163225, 163230, 163297, 163350, 163543, 163823, 164941, 165064, 165133, 165820, 166392, 166674, 167074, 167968, 168067, 168121, 168801, 168833, 169048, 169086, 169539, 169599, 170108, 170147, 170181, 170366, 170506, 171063, 171648, 171737, 172196, 172315, 172716, 172989, 173121, 173146, 173998, 174090, 174303, 175281, 175410, 175653, 176359, 176624, 176938, 177022, 177807, 177863, 177952, 177957, 178006, 178285, 178429, 178971, 178996, 179405, 179526, 179599, 180289, 180460, 180494, 180555, 180559, 181786, 181996, 182373, 182905, 183672, 183843, 184181, 184224, 184371, 184493, 184520, 184858, 184868, 184954, 185209, 185486, 185520, 185639, 185681, 185916, 186427, 186544, 187352, 188137, 188405, 188845, 189365, 189371, 189831, 189845, 189982, 190081, 190992, 191158, 191310, 191616, 191632, 191978, 192095, 192181, 192656, 192782, 192932, 193023, 193318, 193349, 193383, 193388, 193401, 194027, 194299, 194336, 194470, 194700, 194876, 195086, 195213, 195275, 195303, 195355, 195408, 195463, 195529, 195594, 195677, 196053, 196430, 196566, 197350, 197697, 197780, 197886, 198054, 198352, 199072, 199134, 199166, 199381, 199553, 199639, 200064, 200312, 200471, 200572, 201899, 202431, 202681, 202825, 203006, 203302, 203631, 203734, 204020, 204075, 204899, 205159, 205297, 205744, 206235, 206279, 206486, 206700, 206754, 206844, 206907, 207019, 207239, 207545, 207634, 207943, 208283, 208376, 208549, 208618, 208657, 208723, 208978, 210658, 211690, 213103, 213152, 213162, 213305, 213405, 213552, 213555, 213970, 214871, 215334, 215584, 216051, 216160, 216198, 216237, 216417, 216825, 216987, 217465, 217486, 218539, 218749, 218766, 218836, 220050, 220226, 220277, 221156, 221172, 221216, 221523, 221625, 221661, 221663, 221794, 222074, 222206, 222442, 222555, 222751, 223082, 223198, 223214, 223256, 223605, 223670, 223701, 223928, 224079, 224503, 224530, 224811, 225138, 225282, 225307, 225331, 225529, 225591, 225719, 225755, 226377, 226562, 226613, 226761, 227073, 227638, 227741, 227742, 227855, 228098, 228135, 228320, 228413, 228603, 228659, 229127, 229633, 230031, 230096, 230263, 230289, 230417, 230655, 230916, 231134, 231954, 232094, 232597, 232654, 232886, 232985, 233080, 233223, 234848, 235609, 235912, 235991, 236025, 236078, 236177, 236385, 236397, 236571, 236759, 237044, 237942, 237944, 238074, 238189, 238654, 239202, 239208, 239417, 239616, 239745, 239757, 240163, 240225, 240543, 240912, 240945, 241073, 241638, 242051, 242535, 242771, 242931, 243171, 243527, 244151, 244157, 244334, 244578, 244711, 244951, 245062, 245298, 245337, 245729, 245842, 246040, 246053, 246231, 246597, 246612, 246649, 247366, 247421, 247714, 248150, 248203, 248733, 248823, 249817, 249822, 249825, 250249, 250309, 250360, 250381, 250400, 250506, 250594, 250630, 251365, 251395, 251882, 252121, 252220, 252868, 252905, 253915, 254244, 254990, 255093, 255112, 255239, 255800, 256035, 256096, 257090, 257498, 257976, 258019, 258165, 258248, 258382, 258399, 258544, 258628, 258769, 259037, 259443, 259676, 259753, 259924, 259964, 260181, 260190, 260292, 260415, 260478, 260791, 261050, 261315, 261630, 261902, 261942, 262041, 262136, 262273, 262413, 262495, 262705, 262893, 263406, 263440, 264337, 264350, 264572, 264608, 264771, 264853, 265151, 265353, 265635, 265725, 265815, 265950, 266727, 266769, 266847, 266990, 267015, 267200, 267556, 267661, 267848, 268129, 268400, 268670, 269015, 269022, 269033, 269090, 269807, 269920, 270123, 270160, 270523, 270534, 270738, 270749, 270809, 271167, 271383, 271546, 272007, 272119, 272481, 272877, 273363, 273850, 273889, 273917, 274424, 275034, 275170, 275215, 275393, 275922, 276420, 276972, 278359, 278661, 278737, 278771, 279259, 279420, 279530, 279986, 280022, 280705, 280909, 281111, 281505, 281970, 282225, 282257, 282450, 282564, 283138, 283835, 283985, 284349, 284722, 284783, 285115, 285844, 286302, 286460, 286685, 286953, 287303, 287374, 287870, 288180, 288408, 288544, 288649, 288694, 289024, 289236, 289512, 289813, 290320, 290378, 290754, 290898, 290979, 291074, 291373, 291476, 291572, 291915, 291930, 292145, 292519, 292727, 292988, 292999, 293014, 294011, 294509, 294634, 294692, 294751, 294776, 294977, 295092, 295574, 295620, 295670, 295804, 295957, 296257, 296987, 297011, 297069, 297092, 297308, 297357, 297669, 297724, 297812, 298152, 298331, 298362, 298878, 298983, 299351, 299631, 299689, 299931, 300908, 300918, 301155, 301247, 301402, 301581, 302364, 302396, 303548, 303593, 303626, 303683, 304008, 304060, 304173, 304260, 304434, 304765, 304921, 305085, 305103, 305117, 305175, 305390, 305393, 305576, 305873, 306495, 306833, 306990, 307474, 308086, 308251, 308506, 308509, 308759, 308772, 308967, 309071, 309153, 309168, 309317, 309552, 309610, 309638, 309870, 310214, 310411, 310511, 310597, 310600, 310725, 310882, 311497, 311821, 311904, 312252, 312381, 312712, 312802, 312889, 313009, 313481, 313779, 313924, 313925, 314385, 314812, 314992, 315338, 315705, 315773, 315908, 316044, 317179, 317186, 317756, 317939, 318605, 318701, 318785, 318857, 318904, 319605, 319798, 320186, 320609, 320660, 320715, 321006, 321168, 321849, 322160, 322327, 322468, 323288, 323639, 324252, 324340, 324605, 324626, 324634, 324646, 324732, 324962, 325057, 325261, 325284, 325475, 325595, 325885, 326014, 326113, 326243, 326664, 326774, 326920, 328161, 328242, 328284, 328361, 328409, 328412, 328522, 328663, 329254, 329498, 331023, 331180, 331403, 331551, 331592, 331797, 331858, 332607, 332958, 333182, 333383, 333433, 333546, 333687, 333691, 333737, 334410, 334626, 334751, 335131, 335359, 335374, 335524, 335696, 335744, 335839, 335909, 336166, 336477, 336734, 336802, 336858, 337193, 337445, 337584, 337842, 338018, 338256, 338431, 338501, 338838, 338884, 339001, 339058, 339108, 339903, 340308, 341678, 341696, 341794, 342469, 342639, 342774, 343200, 343227, 343704, 343914, 344190, 344271, 344364, 344599, 344794, 344853, 345100, 345389, 345961, 346090, 346109, 346313, 346403, 346849, 346863, 347217, 347691, 347848, 347877, 347884, 347989, 348202, 348403, 348467, 348469, 348522, 348523, 349267, 349466, 349521, 349725, 349897, 350339, 350518, 350657, 350668, 351004, 351140, 351729, 351991, 352217, 352412, 352497, 352694, 352937, 353589, 354290, 354575, 354738, 355000, 355156, 355197, 355513, 355539, 355774, 356660, 356877, 356920, 357088, 357164, 357542, 357561, 357583, 357963, 358064, 358171, 359399, 359684, 360147, 360173, 360182, 360217, 360297, 360571, 360737, 362281, 362369, 362853, 362865, 362884, 363102, 363114, 363702, 363987, 364099, 364372, 364659, 364927, 364941, 364994, 365011, 365069, 365080, 365137, 365325, 365470, 365561, 365701, 365873, 366348, 366614, 367776, 368368, 368918, 369204, 369472, 369775, 369859, 369886, 369976, 370010, 370729, 371135, 371396, 371414, 371514, 371923, 372233, 372764, 373078, 373722, 374049, 374361, 374368, 374723, 374885, 375063, 375256, 375483, 375486, 375755, 376377, 377155, 377450, 377612, 378081, 378198, 378482, 378561, 378667, 378670, 378940, 379350, 379578, 379713, 380088, 380330, 380344, 380636, 380715, 381051, 381116, 381255, 381262, 381416, 381607, 381633, 382263, 382572, 382789, 382800, 382855, 382954, 382999, 383046, 383324, 383330, 383401, 383841, 383890, 384034, 384389, 384924, 384930, 385037, 385126, 385178, 385504, 385669, 385728, 385972, 386036, 386043, 386085, 386504, 386684, 386876, 387225, 387349, 387365, 387558, 388153, 388299, 388654, 388753, 388980, 389107, 389273, 390315, 390435, 390447, 390644, 390663, 391662, 391754, 391837, 392022, 392035, 392183, 392270, 392506, 392711, 392750, 392829, 392981, 393227, 393593, 393714, 394246, 394514, 395178, 395406, 395665, 396006, 396186, 396354, 396852, 396853, 396861, 397094, 397475, 397857, 398305, 398938, 399317, 399407, 399868, 399875, 399956, 399983, 400107, 400401, 400405, 400440, 400809, 401068, 401094, 401307, 401435, 401613, 401926, 402143, 402795, 403074, 403198, 403585, 403592, 403666, 403786, 403915, 404114, 404257, 404403, 404698, 404766, 404797, 404849, 405223, 405499, 405529, 405531, 405736, 405931, 406662, 408239, 408327, 408469, 408792, 408903, 408957, 409025, 409030, 409100, 409120, 409360, 409468, 409591, 409862, 411513, 411620, 411669, 411686, 412062, 412761, 412876, 412947, 412966, 413707, 414276, 414373, 414522, 414529, 414954, 414975, 415162, 415354, 415370, 415435, 415770, 415885, 416115, 416167, 417063, 417298, 417330, 417374, 417583, 417870, 418500, 418684, 419037, 419076, 419363, 419467, 419828, 420402, 420579, 420620, 420692, 420711, 420769, 420825, 421231, 421287, 421773, 422215, 422677, 422755, 422809, 422823, 423243, 423455, 423479, 423694, 423834, 423919, 423977, 424553, 424933, 425200, 425369, 425462, 425839, 426443, 426453, 427449, 427756, 428011, 428619, 428896, 429108, 429226, 429809, 430054, 430265, 430335, 430341, 430428, 430521, 430577, 430744, 430867, 431824, 431893, 432146, 432624, 432702, 432762, 432884, 433145, 433340, 434208, 434410, 434467, 434581, 434976, 435141, 435402, 435554, 435986, 436183, 436302, 436685, 436809, 437221, 437540, 437732, 437831, 438077, 438186, 438698, 439278, 439336, 439539, 439889, 439974, 439982, 440157, 440204, 440449, 440652, 440820, 440836, 440904, 441105, 441168, 441275, 443057, 443082, 443204, 443497, 443727, 443913, 444927, 445187, 445313, 445567, 445621, 445684, 445908, 445933, 446359, 446473, 447224, 447330, 447613, 447689, 448175, 448303, 448399, 448423, 448431, 448439, 448606, 448701, 448759, 449078, 449622, 449921, 450152, 450567, 450599, 450709, 450902, 451169, 451345, 451511, 451835, 451949, 451983, 452167, 452488, 452545, 452905, 453003, 453389, 453483, 453621, 453697, 453738, 453767, 453787, 454107, 454143, 454158, 454566, 454814, 455809, 456239, 456485, 456578, 456950, 457029, 457245, 457258, 457575, 457777, 457906, 458089, 458275, 458675, 459006, 459032, 459641, 460039, 460235, 460289, 460346, 460392, 460773, 460903, 460918, 461389, 461491, 461786, 461835, 461855, 462065, 462381, 462579, 462964, 463467, 463758, 463783, 463792, 463884, 463989, 464298, 465058, 465275, 465820, 465911, 465986, 466260, 466445, 466448, 466710, 467738, 467745, 467929, 468129, 468284, 468345, 468612, 468626, 468796, 468932, 469169, 469198, 469731, 469806, 469825, 469941, 470189, 470891, 471004, 471514, 472131, 472329, 472659, 473090, 473144, 473256, 473354, 473425, 473839, 474119, 474424, 474869, 475035, 475271, 475398, 475685, 475883, 475932, 476155, 476344, 476826, 477853, 477882, 478142, 478809, 480088, 480180, 480192, 480411, 480629, 480663, 480851, 480990, 481663, 482080, 482160, 483049, 483368, 483378, 483449, 483766, 483851, 484113, 484467, 484488, 485142, 485172, 485350, 485907, 485934, 486081, 486084, 486738, 486847, 487063, 487112, 487137, 487788, 487898, 488634, 488974, 489304, 489426, 489829, 490291, 490306, 490352, 490437, 490523, 490952, 491140, 491177, 491211, 491947, 491955, 492171, 492259, 492376, 492677, 493279, 493416, 493741, 494138, 494309, 494456, 494629, 494678, 494782, 495055, 495477, 495832, 496206, 496548, 496556, 496636, 497265, 497402, 497494, 497591, 497797, 497894, 498627, 498706, 498997, 499026, 499037, 499102, 499111, 499252, 499255, 499305, 499731, 499763, 499920, 500019, 500179, 500316, 500359, 500603, 500814, 501242, 501635, 501695, 501696, 501762, 502104, 502113, 502644, 502670, 502827, 503108, 503689, 503799, 503991, 504070, 504123, 504141, 504287, 504977, 505023, 505028, 505242, 505622, 505643, 505788, 506061, 506659, 507157, 507633, 507826, 508053, 508302, 508787, 508822, 508915, 509034, 509227, 509255, 509590, 510182, 510211, 510656, 510791, 511463, 511622, 511977, 512139, 512944, 513042, 513077, 513093, 513292, 513861, 513873, 513917, 514131, 515229, 515275, 515392, 515426, 515612, 515924, 516697, 517026, 517038, 517101, 517468, 517916, 517941, 517987, 518052, 518158, 518321, 518730, 518981, 519351, 519405, 519533, 520150, 520378, 520449, 520528, 520750, 521008, 521824, 522065, 522350, 522935, 523151, 523608, 524047, 524486, 524623, 524638, 525015, 525100, 525106, 525170, 525227, 525533, 525660, 525695, 525714, 525732, 525766, 525790, 525908, 525933, 526347, 526523, 526576, 526769, 526837, 526867, 526955, 527048, 527263, 527299, 527353, 527388, 528091, 528094, 528108, 528167, 528465, 528517, 528563, 528938, 529097, 529208, 529541, 529668, 530286, 530619, 530635, 530998, 531020, 531236, 531465, 531852, 531912, 531960, 532220, 532269, 532503, 533276, 533454, 534297, 534412, 534459, 534511, 534681, 535106, 535251, 535276, 535325, 535452, 535517, 535971, 536504, 537124, 537206, 537231, 537313, 539189, 539830, 539888, 539932, 540059, 540193, 540203, 540207, 540273, 540439, 540834, 541131, 541209, 541897, 542033, 542090, 542205, 542444, 542594, 542678, 542723, 542745, 542755, 543635, 543692, 543860, 544518, 544686, 544857, 544913, 545066, 545088, 545108, 545314, 545582, 545626, 545756, 546183, 546295, 546320, 546658, 546670, 546686, 546864, 547039, 547224, 547247, 547421, 547513, 547777, 548067, 548177, 548583, 548861, 549394, 549527, 549599, 549683, 549804, 550162, 550726, 550812, 551036, 551074, 551752, 552188, 552254, 552463, 552573, 552672, 552752, 553224, 553313, 553455, 553847, 553859, 553876, 553908, 554021, 554169, 554176, 554651, 554866, 555237, 555311, 556108, 556341, 556707, 557081, 557785, 557811, 557990, 558066, 558211, 558587, 558619, 558661, 558804, 559474, 559728, 559908, 560108, 560143, 560150, 560463, 560481, 561015, 561399, 561746, 562073, 562157, 562602, 562885, 563122, 563257, 563299, 564163, 564265, 564294, 564304, 564339, 564627, 564983, 565203, 565714, 566488, 566729, 567827, 567972, 568068, 568461, 568462, 568872, 568878, 569484, 569872, 571105, 571673, 571887, 572063, 572089, 572301, 572348, 572456, 572505, 572608, 572615, 573058, 573065, 573248, 573252, 573529, 574141, 574537, 574590, 574804, 574996, 575675, 575702, 576463, 576754, 576792, 576816, 577148, 577277, 577380, 577544, 577817, 578119, 578292, 578427, 578567, 578849, 578866, 579758, 579964, 580257, 580695, 580778, 581667]

print(len(select))

dataset = json.load(open("/root/autodl-tmp/data/gc24w/person_keypoints_coco_controlnet1k.json", 'r'))

new_dataset = copy.deepcopy(dataset)
new_dataset['images'].clear()
new_dataset['annotations'].clear()

for i in range(len(select)):
    select[i] = str(select[i]).zfill(12)+".jpg"

for i in range(len(dataset['images'])):
    if dataset['images'][i]['file_name'] in select:
        new_dataset['images'].append(dataset['images'][i])

for i in range(len(dataset['annotations'])):
    if (str(dataset['annotations'][i]['image_id']).zfill(12) + ".jpg") in select:
        new_dataset['annotations'].append(dataset['annotations'][i])

with open("person_keypoints_coco_controlnet2w_95.json", "w") as f:
    f.write(json.dumps(new_dataset))
